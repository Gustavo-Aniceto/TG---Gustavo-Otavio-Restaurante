<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G&O Restaurante</title>

    <!-- CSS -->
    <link rel="stylesheet" href="./css/bootstrap.min.css">
    <link rel="stylesheet" href="./css/fontawesome.css">
    <link rel="stylesheet" href="./css/animate.css">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/responsivo.css">
    <link rel="icon" type="image/png" href="./img/logo.png">

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <script src="./js/modernizr-3.5.0.min.js"></script>
    <script src="./js/popper.min.js"></script>
    <script src="./js/wow.min.js"></script>
    <script src="./js/dados.js"></script>
    <script src="./js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="./js/main.js"></script>

    <!-- Scripts para Administração -->
    <script src="js/api/administrativo/loadContent.js"></script>
    <script src="js/api/administrativo/produtos.js"></script>
    <script src="js/api/administrativo/categorias.js"></script>
    <script src="js/api/administrativo/modals.js"></script>
    <script src="js/api/categoriasApi.js"></script>
    <script src="js/api/login.js"></script>

    <!-- Stripe e PayPal -->
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://www.paypal.com/sdk/js?client-id=sua-client-id"></script>

    <script>new WOW().init();</script>
</head>
<body>

    <!-- Seção de Mensagens e Carrinho -->
    <div class="container-mensagens" id="container-mensagens"></div>

    <a class="botao-carrinho hidden" onclick="cardapio.metodos.abrirCarrinho(true)">
        <div class="badge-total-carrinho">0</div>
        <i class="fa fa-shopping-bag"></i>
    </a>

    <!-- Navegação -->
    <section class="header">
        <div class="container">
            <nav class="navbar navbar-expand-lg pl-0 pr-0 col-one">
                <a href="#" class="navbar-brand wow bounceInDown">
                    <img src="./img/logo.png" alt="Logo" width="160" class="img-logo">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown">
                    <span class="navbar-toggler-icon"><i class="fas fa-bars"></i></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav ml-auto mr-auto wow bounceInDown delay-01s">
                        <li class="nav-item"><a href="#reservas" class="nav-link"><b>Tirar Dúvidas</b></a></li>
                        <li class="nav-item"><a href="#cardapio" class="nav-link"><b>Cardápio</b></a></li>
                        <li class="nav-item"><a href="login.html" class="nav-link"><b>ADM</b></a></li>
                    </ul>
                    <a class="btn btn-white btn-icon wow bounceInDown delay-02s" onclick="cardapio.metodos.abrirCarrinho(true)">
                        Carrinho <span class="icon">
                            <div class="container-total-carrinho badge-total-carrinho hidden">0</div>
                            <i class="fa fa-shopping-bag"></i>
                        </span>
                    </a>
                </div>
            </nav>
        </div>
    </section>

    <!-- Banner -->
    <section class="banner">
        <div class="container">
            <div class="row">
                <div class="col-12 col-lg-6 col-md-6 col-sm-12 col-one">
                    <div class="d-flex text-banner">
                        <h1 class="wow fadeInLeft"><b>Gustavo & Otavio <b class="color-primary">Restaurante.</b></b></h1>
                        <p class="wow fadeInLeft delay-02s">
                            Projeto de trabalho de conclusão de curso, desenvolvido por Gustavo Aniceto e Otavio Barreiro, com a orientação do Professor Marco
                        </p>
                        <div class="wow fadeInUp delay-05s">
                            <a class="btn btn-yellow mt-4 mr-3" href="#cardapio">Ver cardápio</a>
                            <a href="#" class="btn btn-white btn-icon-left mt-4" id="btnLigar">
                                <span class="icon-left"><i class="fa fa-phone"></i></span>(11)2459-3209
                            </a>
                        </div>
                    </div>
                    <div class="wow fadeInUp delay-07s">
                        <a href="https://www.instagram.com/eo_aniceto/" class="btn btn-sm btn-white btn-social mt-4 mr-3" target="_blank">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.facebook.com/gustavo.aniceto.5" class="btn btn-sm btn-white btn-social mt-4 mr-3" target="_blank">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="btn btn-sm btn-white btn-social mt-4" id="btnWhatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>
                <div class="col-6 no-mobile">
                    <div class="card-banner wow fadeIn delay-02s"></div>
                    <div class="d-flex img-banner wow fadeIn delay-05s">
                        <img src="./img/burguer.png" alt="Burguer suculento">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cardápio -->
    <section class="cardapio" id="cardapio">
        <div class="background-cardapio"></div>
        <div class="container">
            <div class="row" id="itensCardapio-burgers">
                <!-- Produtos da categoria Burgers serão inseridos aqui -->
            </div>
    
            <div class="row" id="itensCardapio-pizzas">
                <!-- Produtos da categoria Pizzas serão inseridos aqui -->
            </div>
    
            <div class="row" id="itensCardapio-bebidas">
                <!-- Produtos da categoria Bebidas serão inseridos aqui -->
            </div>
    
            <!-- Adicione mais categorias conforme necessário -->
        </div>
    </section>

    <!-- Seção de Pagamento -->
    <section class="pagamento" id="pagamento">
        <div class="container">
            <h2>Escolha o Método de Pagamento</h2>
            <form id="payment-form">
                <label for="payment-method">Método de Pagamento:</label>
                <select id="payment-method">
                    <option value="">Selecione</option>
                    <option value="credit-card">Cartão de Crédito</option>
                    <option value="paypal">PayPal</option>
                </select>

                <div id="credit-card-section" class="payment-section" style="display:none;">
                    <h3>Pagamento com Cartão de Crédito</h3>
                    <div id="card-element"></div>
                    <button id="submit" type="submit">Pagar com Cartão</button>
                </div>

                <div id="paypal-section" class="payment-section" style="display:none;">
                    <h3>Pagamento com PayPal</h3>
                    <div id="paypal-button-container"></div>
                </div>
            </form>
        </div>
    </section>

    <!-- Scripts -->
    <script>
        // Stripe Configuration
        const stripe = Stripe('sua-chave-publica'); // Substitua pela sua chave pública
        const elements = stripe.elements();
        const card = elements.create('card');
        card.mount('#card-element');

        document.getElementById('payment-method').addEventListener('change', function() {
            const method = this.value;
            document.querySelectorAll('.payment-section').forEach(section => {
                section.style.display = 'none';
            });
            if (method === 'credit-card') {
                document.getElementById('credit-card-section').style.display = 'block';
            } else if (method === 'paypal') {
                document.getElementById('paypal-section').style.display = 'block';
            }
        });

        document.getElementById('payment-form').addEventListener('submit', async (event) => {
            event.preventDefault();

            const method = document.getElementById('payment-method').value;
            if (method === 'credit-card') {
                const {token, error} = await stripe.createToken(card);
                if (error) {
                    console.error(error);
                    // Exiba o erro para o usuário
                } else {
                    // Envie o token para o servidor
                    const response = await fetch('/api/pagar', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({token: token.id, amount: 5000}), // Exemplo: R$50,00
                    });

                    const result = await response.json();
                    if (result.error) {
                        console.error(result.error);
                        // Exiba o erro para o usuário
                    } else {
                        // Confirme o sucesso
                        alert('Pagamento realizado com sucesso!');
                    }
                }
            } else if (method === 'paypal') {
                // O botão PayPal já está sendo renderizado pela configuração do PayPal
            }
        });

        // PayPal Configuration
        paypal.Buttons({
            createOrder: function(data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            currency_code: "BRL",
                            value: '50.00' // Exemplo: R$50,00
                        }
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    fetch('/api/pagar', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({orderID: data.orderID}),
                    }).then(response => response.json())
                      .then(result => {
                          alert('Pagamento realizado com sucesso!');
                      });
                });
            }
        }).render('#paypal-button-container');
    </script>
</body>
</html>
